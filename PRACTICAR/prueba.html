<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Actividad 12-15 Unidad 5</title>
    <script src="A12-A14-U5-Roca.js" defer></script>
    <style>
        fieldset{
            font-family: 'Times New Roman';
            display: grid;
            grid-template-columns: 20% 30% 50%;
            grid-gap: 10px;
        }
        #save{
          width: 100px;
        }
        #see{
          width: 50px;
        }
    </style>
</head>
<body>
    <form action="#">
        <fieldset>

            <label for="dni">DNI:</label>
            <input type="text" name="dni" id="dni" pattern="^[0-9]{2}.[0-9]{3}.[0-9]{2}-[A-Za-z]{1}$" minlength="11" maxlength="11" required onblur="comprobar(id, value)">
            <span>(Formato valido: 99.999.99-X)</span>

            <label for="name">Nombre:</label>
            <input type="text" name="name" id="name" required onblur="comprobar(id, value)">
            <span>(Introduzcca al menos un nombre y un apellido. Max: 2 nombres y 2 apellidos)</span>

            <label for="birthday">F.Nac.:</label>
            <input type="date" name="birthday" id="birthday" required onblur="comprobar(id, value)">
            <span>(Formato valido: dd/mm/yyyy)</span>

            <label for="email">E-mail:</label>
            <input type="email" name="email" id="email"  required onblur="comprobar(id, value)">
            <span>(Formato valido: xxx@yyy.zzz)</span>

            <label for="web">Pág. Web:</label>
            <input type="text" name="web" id="web"  required onblur="comprobar(id, value)">
            <span>(Formato valido: http://www.xxxx.yyy)</span>

            <label for="password">Contraseña:</label>
            <input type="password" name="password" id="password" minlength="8" maxlength="10" required onblur="comprobar(id, value)">
            <span>(Debe contener entre 8 y 10 caracteres)</span>

            <label for="passwordconfirm">Confirmar Contraseña:</label>
            <input type="password" name="passwordconfirm" id="passwordconfirm" minlength="8" maxlength="10" required onblur="comprobar(id, value)">
            <span>(Debe contener entre 8 y 10 caracteres)</span>

            <input type="submit" value="Guardar" id="save">
            <input type="button" value="Ver" id="see" onclick="seeCookie()">

        </form>
        </fieldset>
</body>
<script>
    var dni = (names = birthday = email = web = password = "");
function comprobar(id, value) {
  if (value === "" || id === "") {
    return;
  }
  switch (id) {
    case "dni":
      if (!/^[0-9]{2}.[0-9]{3}.[0-9]{2}-[A-Za-z]{1}$/.test(value)) {
        alert("El DNI no cumple el formato");
        document.getElementById(id).value = "";
      } else {
        dni = document.querySelector("#dni").value;
      }
      break;
    case "name":
      if (
        !/^(?:[A-ZÄËÏÖÜÁÉÍÓÚÂÊÎÔÛÀÈÌÒÙa-zäÄëËïÏöÖüÜáéíóúáéíóúÁÉÍÓÚÂÊÎÔÛâêîôûàèìòùÀÈÌÒÙ]+(?:\s+[a-zäÄëËïÏöÖüÜáéíóúáéíóúÁÉÍÓÚÂÊÎÔÛâêîôûàèìòùÀÈÌÒÙ]+){1,3})$/.test(
          value
        )
      ) {
        alert("El Nombre no cumple el formato");
        document.getElementById(id).value = "";
      } else {
        names = value;
      }
      break;
    case "birthday":
      if (!/^\d{4}-\d{2}-\d{2}$/.test(value)) {
        alert("La fecha no cumple el formato");
        document.getElementById(id).value = "";
      } else {
        birthday = value;
      }
      break;
    case "email":
      if (!/^[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,4}$/.test(value)) {
        alert("El email no cumple el formato");
        document.getElementById(id).value = "";
      } else {
        email = value;
      }
      break;
    case "web":
      if (!/^(http):\/\/www.[A-Za-z0-9]+.[a-z]+$/.test(value)) {
        alert("La url no cumple el formato");
        document.getElementById(id).value = "";
      } else {
        web = value;
      }
      break;
    case "password":
      if (!/^\w{8,10}$/.test(value)) {
        alert("La contraseña no cumple el formato");
        document.getElementById(id).value = "";
      } else {
        password = value;
      }
      break;
  }
}

 // Toma los datos del formulario
 const cookie_nif = document.querySelector("#dni").value;
    const cookie_name = document.querySelector("#nombre").value;
    const cookie_date = document.querySelector("#fecha").value;
    const cookie_mail = document.querySelector("#email").value;
    const cookie_web = document.querySelector("#pagina_web").value;
    const cookie_psswd = document.querySelector("#password").value;


function seeCookie() {
  cookie =
    document.cookie = `dni = ${dni}; name = ${names}; birthday = ${birthday}; email = ${email}; web = ${web}; password = ${password}`;
  alert(cookie);
}
</script>
</html>
